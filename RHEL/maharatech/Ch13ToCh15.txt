==========Archiving and Transferring Files===========

Goal:
    Archive and copy files from one system to another.

Objectives: 
    Archive files and directories into a comperessed file using tar,
    and extract the contents of an existing tar archive.

    Transfer files to or form a remote system securely using SSH.


Managing and comperessedd TAR Archives 
    Archiving and Compressings files are useful when creating backups nd transferring data across a network 
    One of the oldest and most common commands for creatgin and working with backup archives is the <tar> command.

Options of the Tar command  
    tar -cvf ect_backup_a
        -c,--create : Create a new archive.
        -x,--extract : Extract from an existing archive.
        -t,--list : List the table of contents of an archive.
        -v,--verbose : Verbose. Shows which files get archived or extracted.
        -f,--file= :This option must be followed by the file name of the archive to user or create.
        -p,--preserve-permissions : preseve the permissions of files and directiories when extracting an archive, without subrtacting the umask.


    du <Dir/file> : estimate file space usage
        -s : Sammary 
        -sh : Sammary and Human Reading 

createing acompressed archive.
    the tar command supports three compression methods.
    gzip
    bzip2
    xz

    use one of the follwing Options to create a compressed tar archive.

        tar -czf ect_backup.tar.gz etc
        tar -cjf ect_backup.tar.bz2 etc
        tar -cJf ect_backup.tar.xz etc
            -z,--gzip : use gzip compression(.tar.gz)
            -j,--bzip2 : use bzip2 compression(.tar.bz2). bzip2 typically achivees abetter compression ratio than gzip.
            -J,--xz : use xz compression(.tar.xz). The xz compression typically achieves. abetter compression ratio than bzip2.

        du -sh *
            #27M ect
            #24M ect_backup_20240923.tar
            #4.8M ect_backup.tar.bz2
            #5.6M ect_backup.tar.gz
            #4.1M ect_backup.tar.xz

    Extract Files

        tar -xzf ect_backup.tar.gz
        tar -xjf ect_backup.tar.bz2
        tar -xJf ect_backup.tar.xz

compress and extract files using gzip,bzip2and xz.

    compress
        gzip etc.tar
        bzip2 abc.tar
        xz myarchive.tar
    extract
        gunzip etc.tar
        bunzip2 abc.tar
        unxz myarchive.tar

Transferring files using secure copy
    The secure copy command, scp, which is part of the OpenSSH suite, copies files from a remote 
    system to the local system or from the local system to a remote system.

    scp <localfile/localdir> <remoteuser@IP>:<file/dir> : from local srever to remote.
        # scp etc.tar root@192.168.1.10:/root : copy etc.tar from here to /root in remote.

    scp <file/dir>:<remotefile/remotedir> <localfile/localdir> : from remote to local.
        # scp root@192.168.1.10:/root/date.txt . : copy date.txt form root to here.

Transferring files using the secure file Transfer program
    To interactively upload or download files from a SSH server, use the Secure File Transfer Program,sftp.
    A session with the sftp command uses the secure authentication mechanism and encrypted data transfer to and from the SSH server.

    sftp <remoteuser@remotehost>
        #sftp root@192.168.1.10

        l<comand>: to run command localy.
            # lpwd : print local working directory

        put <filename> : to upload file .
            # put etc.tar : upload etc.tar to remote
        get <filename> : to download file.
            # get date.txt : download date.txt form remote




=================Installing and Updating Software Packages============

Goal 
    download,install,Update, and manage software packages fomr RedHat and Yum Package repositories.

Objectives
    install, Update, or remove software packages using Yum and RPM tools.


Explaining and investigating RPM software packages
    RPM package files names consist of four elements (Plus the .rpm suffix):
    name-version-release-architecture.rpm

        Name : is one or more words describing the contnets.
        Version : is the version nubmer of the original software.
        Release : is the release nubmerof teh package based on that version.
        Arch : is the processor architecture the package was compiled to run on.
        noarch  indicates that this package's contents are not architecture-Specific.

        hostnamectl : to track how the local system appears on a network. It also displays operating system information, including its version.
        cat /etc/redhat-release : displays operating system name and version.
        uname -a : displays information about os.


        wget <url> : The non-interactive network downloader



Explaining RPM Packages
    The RPM Package Manager (RPM) is a powerful package management system capable of
       . building computer software from source into easily distributable packages
       . installing, updating and uninstalling packaged software
       . querying detailed information about the packaged software, whether installed or not
       . verifying integrity of packaged software and resulting software installation


    rpm -qa: list all installed packages.
    rpm -q <packagename> : List what version of the package is currently installed.
        #rpm -q yum : List version of yum package 
    rpm -qf <filaname> : find out what package provieds FILENAME.

    rpm -qi <packagename> : get detailed information about the apckage.
        #rpm -qi yum :
    rpm -ql <packagename> : list the files installed by the package
        #rpm -ql yum :
    rpm -qc <packagename> : List just the confuguration files installed by the package.
        #rpm -qc yum :
    rpm -qd <packagename> : List just the documentation files installed by the package.
        #rpm -qc yum
    rpm -q --scripts <packagename> that run before or after the package is installed or removed .
        #rpm -q --scripts  openssh-server: that run before or after the openssh package is installed or removed .
    rpm -q --changelog : list change information for the package. 
        rpm -q --changelog openssh-server :information for the openssh package (version and )

Installing RPM packages.
    the rpm command can also be used to install an RPM package that you have downloaded to your local directory.
        rpm -ivh <Package.rpm> 
            -i : install package(s).
            -v : Verbosity provide more detailed output.
            -h : Installation progress ####.

remove RPM packages.
    rpm -ev <packagename> : remove package.
        rpm -ev firefox : remove firefox package.
    
Create Yum repositories
    1.mount RHEL iso image.
        mount -o loop /dev/sr0

        df -h : displays file system 
    2.create AppStream.repo and BaseOS.repo in /etc/yum.reops.d/
        cd /etc/yum.reops.d/
        touch AppStream.repo and BaseOS.repo

    3. Open each file separately and add 5 lines :
        vim AppStream.repo
             [Local_AppStream] #Id
             name="RHEL9 Locaal AppStream repository" #describtion
             baseurl=file:///media/AppStream #location
             enabled=1 #enable or disable the repo
             gpgchek=0 #Check this package to see if it is verified by Red hat or not.

        :wq
        vim BaseOS.repo
            [Local_BaseOS] #Id
             name="RHEL9 Locaal BaseOS repository" 
             baseurl=file:///media/BaseOS 
             enabled=1 
             gpgchek=0 
        :wq
        4.Check repositories 
            yum reoplist : displaps repositories
            yum reoplist --all : displays repositories with status.

Prevent warning message (updateing subscriping)
    vi /etc/yum/pluginconf.d/subscription-manager.conf
        enabled=0
    :wq

        
Installing and updating software packages with YUM
    • The low-level rpm command can be used to install packages, but it is not designed to work with
    package repositories or resolve dependencies from multiple sources automatically.
    • Yum is designed to be a better system for managing RPM-based software installation and updates.
    The yum command allows you to install, update, remove, and get information about software
    packages and their dependencies.
   
    Finding Software with Yum
    • yum help : displays usage information.
    • yum list :displays installed and available packages.

    • yum search KEYWORD :lists packages by keywords found in the name and summary filds only.


Introduction to application stream
    Two main repositories:
        The BaseOS repository mainly concernsthe operating system.

        The AppStream repository containsapplication modules and non-modularRPMS.

    IMPORTANT
        Both BaseOS and AppStream are a necessary part of a Red Hat Enterprise Linux 9 system.

List, Search, Install software package with YUM
    yum info <packagename> : information about package (== rpm qi <packagename>)
    yum lsit "<PN>*" : list all packages start with <PN>

    yum install <packname> : Find and install the package. 
        yum install httpd : install apache web server.
    yum update <packagename> : update package
        yum update httpd : update apache web server.
    yum remove <packagename> : remove package.
        yum remove httpd remove apache web server.
    yum history : Displays yum history.



Summary of RPM query commands
    Installed packages can be queried directly with the rpm command.
     Add the -p option to query a package file before installation.
    COMMAND                                TASK
    rpm -qa                                List all RPM packages currently installed
    rpm -q NAME                            Display the version of NAME installed on the system
    rpm -qi NAME                           Display detailed information about a package
    rpm -ql NAME                           List all files included in a package
    rpm -qc NAME                           List configuration files included in a package
    rpm -qd NAME                           List documentation files included in a package
    rpm -q - -changelog NAME               Show a short summary of the reason for a new package release
    rpm -q --scripts NAME                  Display the shell scripts run on package installation, upgrade, or removal
    
    
Summary of YUM commands
     Packages can be located,installed, updated, 
     and removed by name or by package groups.


    COMMAND:                                TASK:
    yum list [NAME-PATTERN]                  List installed and available packages by name
    yum group list                           List installed and available groups
    yum search KEYWORD                       Search for a package by keyword
    yum info PACKAGENAME                     Show details of a package
    yum install PACKAGENAME                  Install a package
    yum group install GROUPNAME              Install a package group
    yum update                               Update all packages
    yum remove PACKAGENAME                   Remove a package
    yum history                              Display transaction history

SUMMARY
    In this chapter, you learned:
         • Software is provided as RPM packages, which make it easy to install, upgrade, and uninstall software
         from the system.
         • The rpm command can be used to query a local database to provide information about the contents of
         installed packages and install downloaded package files.
         • yum is a powerful command-line tool that can be used to install, update, remove, and query software
         packages.
         Red Hat Enterprise Linux 9 uses Application Streams to provide a single repository to host multiple
         versions of an application's packages and its dependencies.